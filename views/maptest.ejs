<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HERE Maps Integration</title>

  <!-- Replace YOUR_API_KEY with your actual API key -->
  <script src="https://js.api.here.com/v3/3.1/mapsjs-core.js" type="text/javascript"></script>
  <script src="https://js.api.here.com/v3/3.1/mapsjs-service.js" type="text/javascript"></script>
  <script src="https://js.api.here.com/v3/3.1/mapsjs-mapevents.js" type="text/javascript"></script>
</head>
<body>

  <div id="mapContainer" style="width: 100%; height: 400px;"></div>

  <script>
    var platform = new H.service.Platform({ apikey: 'your_key' });
    var defaultLayers = platform.createDefaultLayers();
    var map = new H.Map(
      document.getElementById('mapContainer'),
      defaultLayers.vector.normal.map,
      { center: { lat: 0, lng: 0 }, zoom: 2 }
    );
    var behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));

    map.addEventListener('tap', function (e) {
      var coord = map.screenToGeo(e.currentPointer.viewportX, e.currentPointer.viewportY);
      sendLocationToBackend(coord);
    });

    function sendLocationToBackend(coord) {
      fetch('/maptest', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ location: coord }),
      })
        .then(response => response.json())
        .then(data => {
          console.log('Response from backend:', data);
          // Handle the response as needed
        })
        .catch(error => {
          console.error('Error sending location to backend:', error);
          // Handle errors
        });
    }
  </script>

</body>
</html>
